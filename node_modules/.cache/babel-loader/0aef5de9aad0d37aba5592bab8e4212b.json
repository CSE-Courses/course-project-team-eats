{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import*as api from\"./api\";export function useBusinessSearch(term,location,price){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),businesses=_useState2[0],setBusinesses=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),amountResults=_useState4[0],setAmountResults=_useState4[1];var _useState5=useState({term:term,location:location,price:price}),_useState6=_slicedToArray(_useState5,2),searchParams=_useState6[0],setSearchParams=_useState6[1];// const [searchWithFilterParams, setsearchWithFilterParams] = useState({\n//   price,\n// });\nuseEffect(function(){setBusinesses([]);var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var rawData,resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.get(\"/businesses/search\",searchParams);case 3:rawData=_context.sent;_context.next=6;return rawData.json();case 6:resp=_context.sent;setBusinesses(resp.businesses);setAmountResults(resp.total);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[searchParams]);return[businesses,amountResults,searchParams,setSearchParams];}","map":{"version":3,"sources":["/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/src/hooks/yelp-api/useBusinessSearch.js"],"names":["useState","useEffect","api","useBusinessSearch","term","location","price","businesses","setBusinesses","amountResults","setAmountResults","searchParams","setSearchParams","fetchData","get","rawData","json","resp","total","console","error"],"mappings":"shBAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,OAArB,CAEA,MAAO,SAASC,CAAAA,iBAAT,CAA2BC,IAA3B,CAAiCC,QAAjC,CAA2CC,KAA3C,CAAkD,eACnBN,QAAQ,CAAC,EAAD,CADW,wCAChDO,UADgD,eACpCC,aADoC,8BAEbR,QAAQ,EAFK,yCAEhDS,aAFgD,eAEjCC,gBAFiC,8BAGfV,QAAQ,CAAC,CAAEI,IAAI,CAAJA,IAAF,CAAQC,QAAQ,CAARA,QAAR,CAAkBC,KAAK,CAALA,KAAlB,CAAD,CAHO,yCAGhDK,YAHgD,eAGlCC,eAHkC,eAIvD;AACA;AACA;AAEAX,SAAS,CAAC,UAAM,CACdO,aAAa,CAAC,EAAD,CAAb,CACA,GAAMK,CAAAA,SAAS,0FAAG,0LAEQX,CAAAA,GAAG,CAACY,GAAJ,CAAQ,oBAAR,CAA8BH,YAA9B,CAFR,QAERI,OAFQ,qCAGKA,CAAAA,OAAO,CAACC,IAAR,EAHL,QAGRC,IAHQ,eAIdT,aAAa,CAACS,IAAI,CAACV,UAAN,CAAb,CACAG,gBAAgB,CAACO,IAAI,CAACC,KAAN,CAAhB,CALc,iFAOdC,OAAO,CAACC,KAAR,cAPc,qEAAH,kBAATP,CAAAA,SAAS,0CAAf,CAUAA,SAAS,GACV,CAbQ,CAaN,CAACF,YAAD,CAbM,CAAT,CAeA,MAAO,CAACJ,UAAD,CAAaE,aAAb,CAA4BE,YAA5B,CAA0CC,eAA1C,CAAP,CACD","sourcesContent":["import { useState, useEffect } from \"react\";\nimport * as api from \"./api\";\n\nexport function useBusinessSearch(term, location, price) {\n  const [businesses, setBusinesses] = useState([]);\n  const [amountResults, setAmountResults] = useState();\n  const [searchParams, setSearchParams] = useState({ term, location, price });\n  // const [searchWithFilterParams, setsearchWithFilterParams] = useState({\n  //   price,\n  // });\n\n  useEffect(() => {\n    setBusinesses([]);\n    const fetchData = async () => {\n      try {\n        const rawData = await api.get(\"/businesses/search\", searchParams);\n        const resp = await rawData.json();\n        setBusinesses(resp.businesses);\n        setAmountResults(resp.total);\n      } catch (e) {\n        console.error(e);\n      }\n    };\n    fetchData();\n  }, [searchParams]);\n\n  return [businesses, amountResults, searchParams, setSearchParams];\n}\n"]},"metadata":{},"sourceType":"module"}