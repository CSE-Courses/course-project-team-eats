{"ast":null,"code":"import _slicedToArray from\"/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{NavBar}from\"../NavBar/NavBar\";//import {SubNav} from '../NavBar/SubNav/SubNav';\nimport{SearchResultsSummary}from\"./SearchResultsSummary/SearchResultsSummary\";import{SearchResults}from\"./SearchResults/SearchResults\";import useReactRouter from\"use-react-router\";import{useBusinessSearch}from\"../hooks/yelp-api/useBusinessSearch\";import{Pagination}from\"./Pagination/Pagination\";export function Search(){var _useReactRouter=useReactRouter(),location=_useReactRouter.location,history=_useReactRouter.history;var params=new URLSearchParams(location.search);var term=params.get(\"find_desc\");var locationParam=params.get(\"find_loc\");var priceParam=params.get(\"price\");var _useBusinessSearch=useBusinessSearch(term,locationParam,priceParam),_useBusinessSearch2=_slicedToArray(_useBusinessSearch,4),businesses=_useBusinessSearch2[0],amountResults=_useBusinessSearch2[1],searchParams=_useBusinessSearch2[2],performSearch=_useBusinessSearch2[3];if(!term||!locationParam){history.push(\"/\");}function search(term,location){var encodedTerm=encodeURI(term);var encodedLocation=encodeURI(location);history.push(\"/search?find_desc=\".concat(encodedTerm,\"&find_loc=\").concat(encodedLocation));performSearch({term:term,location:location});}function searchWithFilter(term,location,price){var encodedTerm=encodeURI(term);var encodedLocation=encodeURI(locationParam);var encodedPrice=price;history.push(\"/search?find_desc=\".concat(encodedTerm,\"&find_loc=\").concat(encodedLocation,\"&price=\").concat(encodedPrice));performSearch({term:term,location:location,price:price});}function getPagesCount(total,denominator){var divisible=total%denominator===0;var valueToBeAdded=divisible?0:1;return Math.floor(total/denominator)+valueToBeAdded;}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NavBar,{term:term,location:locationParam,search:search}),/*#__PURE__*/React.createElement(SearchResultsSummary,{term:searchParams.term,location:searchParams.location,amountResults:amountResults,shownResults:businesses?businesses.length:0,searchWithFilter:searchWithFilter,search:search}),/*#__PURE__*/React.createElement(SearchResults,{businesses:businesses}),/*#__PURE__*/React.createElement(Pagination,{getPagesCount:getPagesCount}));}","map":{"version":3,"sources":["/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/src/Search/Search.js"],"names":["React","NavBar","SearchResultsSummary","SearchResults","useReactRouter","useBusinessSearch","Pagination","Search","location","history","params","URLSearchParams","search","term","get","locationParam","priceParam","businesses","amountResults","searchParams","performSearch","push","encodedTerm","encodeURI","encodedLocation","searchWithFilter","price","encodedPrice","getPagesCount","total","denominator","divisible","valueToBeAdded","Math","floor","length"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { NavBar } from \"../NavBar/NavBar\";\n//import {SubNav} from '../NavBar/SubNav/SubNav';\nimport { SearchResultsSummary } from \"./SearchResultsSummary/SearchResultsSummary\";\nimport { SearchResults } from \"./SearchResults/SearchResults\";\nimport useReactRouter from \"use-react-router\";\nimport { useBusinessSearch } from \"../hooks/yelp-api/useBusinessSearch\";\nimport { Pagination } from \"./Pagination/Pagination\";\n\nexport function Search() {\n  const { location, history } = useReactRouter();\n  const params = new URLSearchParams(location.search);\n  const term = params.get(\"find_desc\");\n  const locationParam = params.get(\"find_loc\");\n  const priceParam = params.get(\"price\");\n  const [\n    businesses,\n    amountResults,\n    searchParams,\n    performSearch,\n  ] = useBusinessSearch(term, locationParam, priceParam);\n\n  if (!term || !locationParam) {\n    history.push(\"/\");\n  }\n\n  function search(term, location) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(location);\n    history.push(\n      `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}`\n    );\n    performSearch({ term, location });\n  }\n\n  function searchWithFilter(term, location, price) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(locationParam);\n    const encodedPrice = price;\n    history.push(\n      `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}&price=${encodedPrice}`\n    );\n    performSearch({ term, location, price });\n  }\n\n  function getPagesCount(total, denominator) {\n    const divisible = total % denominator === 0;\n    const valueToBeAdded = divisible ? 0 : 1;\n    return Math.floor(total / denominator) + valueToBeAdded;\n  }\n\n  return (\n    <div>\n      <NavBar term={term} location={locationParam} search={search} />\n      {/* <SubNav /> */}\n      <SearchResultsSummary\n        term={searchParams.term}\n        location={searchParams.location}\n        amountResults={amountResults}\n        shownResults={businesses ? businesses.length : 0}\n        searchWithFilter={searchWithFilter}\n        search={search}\n      />\n      <SearchResults businesses={businesses} />\n      <Pagination getPagesCount={getPagesCount} />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}