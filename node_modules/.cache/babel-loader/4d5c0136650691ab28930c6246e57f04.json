{"ast":null,"code":"import _slicedToArray from\"/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{NavBar}from\"../NavBar/NavBar\";//import styles from \"./Search.module.css\";\nimport{SearchResultsSummary}from\"./SearchResultsSummary/SearchResultsSummary\";import{SearchResults}from\"./SearchResults/SearchResults\";import useReactRouter from\"use-react-router\";import{useBusinessSearch}from\"../hooks/yelp-api/useBusinessSearch\";import{Pagination}from\"./Pagination/Pagination\";export function Search(){var _useReactRouter=useReactRouter(),location=_useReactRouter.location,history=_useReactRouter.history;var params=new URLSearchParams(location.search);var term=params.get(\"find_desc\");var locationParam=params.get(\"find_loc\");var priceParam=params.get(\"price\");var radiusParam=params.get(\"radius\");var offsetParam=params.get(\"offset\");var _useBusinessSearch=useBusinessSearch(term,locationParam,priceParam,radiusParam,offsetParam),_useBusinessSearch2=_slicedToArray(_useBusinessSearch,4),businesses=_useBusinessSearch2[0],amountResults=_useBusinessSearch2[1],searchParams=_useBusinessSearch2[2],performSearch=_useBusinessSearch2[3];if(!term||!locationParam){history.push(\"/\");}function search(term,location){var encodedTerm=encodeURI(term);var encodedLocation=encodeURI(location);history.push(\"/search?find_desc=\".concat(encodedTerm,\"&find_loc=\").concat(encodedLocation));performSearch({term:term,location:location});}function searchWithFilter(term,location,price){var encodedTerm=encodeURI(term);var encodedLocation=encodeURI(locationParam);var encodedPrice=price;history.push(\"/search?find_desc=\".concat(encodedTerm,\"&find_loc=\").concat(encodedLocation,\"&price=\").concat(encodedPrice));performSearch({term:term,location:location,price:price});}function searchWithRadiusFilter(term,location,radius){var encodedTerm=encodeURI(term);var encodedLocation=encodeURI(locationParam);var encodedRadius=radius;history.push(\"/search?find_desc=\".concat(encodedTerm,\"&find_loc=\").concat(encodedLocation,\"&radius=\").concat(encodedRadius));performSearch({term:term,location:location,radius:radius});}function nextPage(term,location,offset){var encodedTerm=encodeURI(term);var encodedLocation=encodeURI(locationParam);var encodedOffset=offset;history.push(\"/search?find_desc=\".concat(encodedTerm,\"&find_loc=\").concat(encodedLocation,\"&offset=\").concat(encodedOffset));performSearch({term:term,location:location,offset:offset});}// function nextUser(term, location) {\n//   const encodedTerm = encodeURI(term);\n//   const encodedLocation = encodeURI(locationParam);\n//   history.push(\n//     `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}`\n//   );\n//   performSearch({ term, location });\n// }\nfunction handleSubmit(e){e.preventDefault();//TODO: function to submit data to the DB\n}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NavBar,{term:term,location:locationParam,search:search}),/*#__PURE__*/React.createElement(SearchResultsSummary,{term:searchParams.term,location:searchParams.location,amountResults:amountResults,shownResults:businesses?businesses.length:0,searchWithFilter:searchWithFilter,searchWithRadiusFilter:searchWithRadiusFilter,search:search,handleSubmit:handleSubmit}),/*#__PURE__*/React.createElement(SearchResults,{businesses:businesses,handleSubmit:handleSubmit}),/*#__PURE__*/React.createElement(Pagination,{nextPage:nextPage,search:search,term:searchParams.term,location:searchParams.location}));}","map":{"version":3,"sources":["/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/src/Search/Search.js"],"names":["React","NavBar","SearchResultsSummary","SearchResults","useReactRouter","useBusinessSearch","Pagination","Search","location","history","params","URLSearchParams","search","term","get","locationParam","priceParam","radiusParam","offsetParam","businesses","amountResults","searchParams","performSearch","push","encodedTerm","encodeURI","encodedLocation","searchWithFilter","price","encodedPrice","searchWithRadiusFilter","radius","encodedRadius","nextPage","offset","encodedOffset","handleSubmit","e","preventDefault","length"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { NavBar } from \"../NavBar/NavBar\";\n//import styles from \"./Search.module.css\";\nimport { SearchResultsSummary } from \"./SearchResultsSummary/SearchResultsSummary\";\nimport { SearchResults } from \"./SearchResults/SearchResults\";\nimport useReactRouter from \"use-react-router\";\nimport { useBusinessSearch } from \"../hooks/yelp-api/useBusinessSearch\";\nimport { Pagination } from \"./Pagination/Pagination\";\n\nexport function Search() {\n  const { location, history } = useReactRouter();\n  const params = new URLSearchParams(location.search);\n  const term = params.get(\"find_desc\");\n  const locationParam = params.get(\"find_loc\");\n  const priceParam = params.get(\"price\");\n  const radiusParam = params.get(\"radius\");\n  const offsetParam = params.get(\"offset\");\n  const [\n    businesses,\n    amountResults,\n    searchParams,\n    performSearch,\n  ] = useBusinessSearch(\n    term,\n    locationParam,\n    priceParam,\n    radiusParam,\n    offsetParam\n  );\n\n  if (!term || !locationParam) {\n    history.push(\"/\");\n  }\n\n  function search(term, location) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(location);\n    history.push(\n      `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}`\n    );\n    performSearch({ term, location });\n  }\n\n  function searchWithFilter(term, location, price) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(locationParam);\n    const encodedPrice = price;\n\n    history.push(\n      `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}&price=${encodedPrice}`\n    );\n    performSearch({ term, location, price });\n  }\n\n  function searchWithRadiusFilter(term, location, radius) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(locationParam);\n    const encodedRadius = radius;\n\n    history.push(\n      `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}&radius=${encodedRadius}`\n    );\n    performSearch({ term, location, radius });\n  }\n\n  function nextPage(term, location, offset) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(locationParam);\n    const encodedOffset = offset;\n\n    history.push(\n      `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}&offset=${encodedOffset}`\n    );\n    performSearch({ term, location, offset });\n  }\n\n  // function nextUser(term, location) {\n  //   const encodedTerm = encodeURI(term);\n  //   const encodedLocation = encodeURI(locationParam);\n\n  //   history.push(\n  //     `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}`\n  //   );\n  //   performSearch({ term, location });\n  // }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    //TODO: function to submit data to the DB\n  }\n\n  return (\n    <div>\n      <NavBar term={term} location={locationParam} search={search} />\n      {/* <SubNav /> */}\n      <SearchResultsSummary\n        term={searchParams.term}\n        location={searchParams.location}\n        amountResults={amountResults}\n        shownResults={businesses ? businesses.length : 0}\n        searchWithFilter={searchWithFilter}\n        searchWithRadiusFilter={searchWithRadiusFilter}\n        search={search}\n        handleSubmit={handleSubmit}\n      />\n\n      {/* <div className={`${styles[\"flexbox\"]}`}>\n        <div className={styles[\"heading\"]}>Choose your 5 best restaurants</div>\n\n        <button\n          className={`button is-info ${styles[\"submit-button\"]}`}\n          onClick={(e) => {\n            handleSubmit(e);\n            search();\n          }}\n        >\n          <span>Next User</span>\n          <span className=\"icon\">\n            <i className=\"fas fa-chevron-right\"></i>\n          </span>\n        </button>\n      </div> */}\n      <SearchResults businesses={businesses} handleSubmit={handleSubmit} />\n      <Pagination\n        nextPage={nextPage}\n        search={search}\n        term={searchParams.term}\n        location={searchParams.location}\n      />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}