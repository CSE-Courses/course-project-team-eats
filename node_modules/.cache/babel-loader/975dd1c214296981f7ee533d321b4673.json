{"ast":null,"code":"var _jsxFileName = \"/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/src/Search/Search.js\";\nimport React from \"react\";\nimport { NavBar } from \"../NavBar/NavBar\";\nimport styles from \"./Search.module.css\";\nimport { SearchResultsSummary } from \"./SearchResultsSummary/SearchResultsSummary\";\nimport { SearchResults } from \"./SearchResults/SearchResults\";\nimport useReactRouter from \"use-react-router\";\nimport { useBusinessSearch } from \"../hooks/yelp-api/useBusinessSearch\";\nimport { Pagination } from \"./Pagination/Pagination\";\nexport function Search() {\n  const {\n    location,\n    history\n  } = useReactRouter();\n  const params = new URLSearchParams(location.search);\n  const term = params.get(\"find_desc\");\n  const locationParam = params.get(\"find_loc\");\n  const priceParam = params.get(\"price\");\n  const radiusParam = params.get(\"radius\");\n  const [businesses, amountResults, searchParams, performSearch] = useBusinessSearch(term, locationParam, priceParam, radiusParam);\n\n  if (!term || !locationParam) {\n    history.push(\"/\");\n  }\n\n  function search(term, location) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(location);\n    history.push(`/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}`);\n    performSearch({\n      term,\n      location\n    });\n  }\n\n  function searchWithFilter(term, location, price) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(locationParam);\n    const encodedPrice = price;\n    history.push(`/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}&price=${encodedPrice}`);\n    performSearch({\n      term,\n      location,\n      price\n    });\n  }\n\n  function searchWithRadiusFilter(term, location, radius) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(locationParam);\n    const encodedRadius = radius;\n    history.push(`/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}&radius=${encodedRadius}`);\n    performSearch({\n      term,\n      location,\n      radius\n    });\n  }\n\n  function getPagesCount(total, denominator) {\n    const divisible = total % denominator === 0;\n    const valueToBeAdded = divisible ? 0 : 1;\n    return Math.floor(total / denominator) + valueToBeAdded;\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault(); //TODO: function to submit data to the DB\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(NavBar, {\n    term: term,\n    location: locationParam,\n    search: search,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(SearchResultsSummary, {\n    term: searchParams.term,\n    location: searchParams.location,\n    amountResults: amountResults,\n    shownResults: businesses ? businesses.length : 0,\n    searchWithFilter: searchWithFilter,\n    searchWithRadiusFilter: searchWithRadiusFilter,\n    search: search,\n    handleSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"heading\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, \"Choose your 5 best restaurants\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button is-info\",\n    onClick: e => handleSubmit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, \"Next User\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-chevron-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(SearchResults, {\n    businesses: businesses,\n    handleSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Pagination, {\n    getPagesCount: getPagesCount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/src/Search/Search.js"],"names":["React","NavBar","styles","SearchResultsSummary","SearchResults","useReactRouter","useBusinessSearch","Pagination","Search","location","history","params","URLSearchParams","search","term","get","locationParam","priceParam","radiusParam","businesses","amountResults","searchParams","performSearch","push","encodedTerm","encodeURI","encodedLocation","searchWithFilter","price","encodedPrice","searchWithRadiusFilter","radius","encodedRadius","getPagesCount","total","denominator","divisible","valueToBeAdded","Math","floor","handleSubmit","e","preventDefault","length"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { NavBar } from \"../NavBar/NavBar\";\nimport styles from \"./Search.module.css\";\nimport { SearchResultsSummary } from \"./SearchResultsSummary/SearchResultsSummary\";\nimport { SearchResults } from \"./SearchResults/SearchResults\";\nimport useReactRouter from \"use-react-router\";\nimport { useBusinessSearch } from \"../hooks/yelp-api/useBusinessSearch\";\nimport { Pagination } from \"./Pagination/Pagination\";\n\nexport function Search() {\n  const { location, history } = useReactRouter();\n  const params = new URLSearchParams(location.search);\n  const term = params.get(\"find_desc\");\n  const locationParam = params.get(\"find_loc\");\n  const priceParam = params.get(\"price\");\n  const radiusParam = params.get(\"radius\");\n  const [\n    businesses,\n    amountResults,\n    searchParams,\n    performSearch,\n  ] = useBusinessSearch(term, locationParam, priceParam, radiusParam);\n\n  if (!term || !locationParam) {\n    history.push(\"/\");\n  }\n\n  function search(term, location) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(location);\n    history.push(\n      `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}`\n    );\n    performSearch({ term, location });\n  }\n\n  function searchWithFilter(term, location, price) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(locationParam);\n    const encodedPrice = price;\n\n    history.push(\n      `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}&price=${encodedPrice}`\n    );\n    performSearch({ term, location, price });\n  }\n\n  function searchWithRadiusFilter(term, location, radius) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(locationParam);\n    const encodedRadius = radius;\n\n    history.push(\n      `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}&radius=${encodedRadius}`\n    );\n    performSearch({ term, location, radius });\n  }\n\n  function getPagesCount(total, denominator) {\n    const divisible = total % denominator === 0;\n    const valueToBeAdded = divisible ? 0 : 1;\n    return Math.floor(total / denominator) + valueToBeAdded;\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    //TODO: function to submit data to the DB\n  }\n\n  return (\n    <div>\n      <NavBar term={term} location={locationParam} search={search} />\n      {/* <SubNav /> */}\n      <SearchResultsSummary\n        term={searchParams.term}\n        location={searchParams.location}\n        amountResults={amountResults}\n        shownResults={businesses ? businesses.length : 0}\n        searchWithFilter={searchWithFilter}\n        searchWithRadiusFilter={searchWithRadiusFilter}\n        search={search}\n        handleSubmit={handleSubmit}\n      />\n      <div className={styles[\"heading\"]}>Choose your 5 best restaurants</div>\n      <button className=\"button is-info\" onClick={(e) => handleSubmit(e)}>\n        <span>Next User</span>\n        <span className=\"icon\">\n          <i className=\"fas fa-chevron-right\"></i>\n        </span>\n      </button>\n      <SearchResults businesses={businesses} handleSubmit={handleSubmit} />\n      <Pagination getPagesCount={getPagesCount} />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}