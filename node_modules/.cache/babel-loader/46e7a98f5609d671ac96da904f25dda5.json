{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{BusinessRating}from\"../../../BusinessRating/BusinessRating\";import styles from\"./SearchResult.module.css\";//import $ from \"jquery\";\nvar initialList=[{id:\"1\",name:\"Nothing\"}];//This is the part where a global function is declared.\n// function GlobalList (props) {\n//     const [listData, setListData] = useState({ list: initialList });\n//     const [name, setName] = useState(\"\");\n//     function handleAdd() {\n//       const newList = listData.list.concat({\n//         id: props.business.id,\n//         name: props.business.name,\n//       });\n//       setListData({ ...listData, list: newList });\n//       setName(\"\");\n//     }\n//     function handleDelete() {\n//       setListData({ list: initialList });\n//       setName(\"\");\n//     }\n//     console.log(name);\n//     console.log(listData);\n// }\nexport function SearchResult(props){// const [restaurant, setRestaurant] = useState([]);\nvar _useState=useState({list:initialList}),_useState2=_slicedToArray(_useState,2),listData=_useState2[0],setListData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];if(!props.business){return/*#__PURE__*/React.createElement(\"div\",null,\" Error! Not Found\");}// function handleClick(e) {\n//   $(\".image-checkbox\").each(function () {\n//     if ($(this).find('input[type=\"checkbox\"]').first().attr(\"checked\")) {\n//       $(this).addClass(\"image-checkbox-checked\");\n//     } else {\n//       $(this).removeClass(\"image-checkbox-checked\");\n//     }\n//   });\n//   // sync the state to the input\n//   $(\".image-checkbox\").on(\"click\", function (e) {\n//     $(this).toggleClass(\"image-checkbox-checked\");\n//     var $checkbox = $(this).find('input[type=\"checkbox\"]');\n//     $checkbox.prop(\"checked\", !$checkbox.prop(\"checked\"));\n//     e.preventDefault();\n//   });\n//   console.log(\"Clicked\");\n//}\nfunction handleAdd(){var newList=listData.list.concat({id:props.business.id,name:props.business.name});setListData(_objectSpread(_objectSpread({},listData),{},{list:newList}));setName(\"\");}function handleDelete(){setListData({list:initialList});setName(\"\");}console.log(name);console.log(listData);var postData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var restaurant,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:restaurant={listData:name};_context.next=3;return fetch(\"/add_restaurant\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(restaurant)});case 3:response=_context.sent;if(response.ok){console.log(\"POST request works\");console.log(response);}case 5:case\"end\":return _context.stop();}}},_callee);}));return function postData(){return _ref.apply(this,arguments);};}();var tags=props.business.categories.map(function(category){return/*#__PURE__*/React.createElement(\"span\",{className:\"tag \".concat(styles[\"business-tag\"]),key:props.business.id+category.title},category.title);});var addressLines=props.business.location.display_address.map(function(addressLine){return/*#__PURE__*/React.createElement(\"p\",{key:props.business.id+addressLine},addressLine);});return/*#__PURE__*/React.createElement(\"div\",{className:styles[\"search-result\"]},/*#__PURE__*/React.createElement(\"label\",{className:\"image-checkbox\",onClick:function onClick(e){if(e.target.checked){handleAdd();postData();}else{handleDelete();}},value:props.business.name},/*#__PURE__*/React.createElement(\"img\",{src:props.business.image_url,alt:\"business\",className:\"\".concat(styles[\"business-image\"])}),/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",name:\"image[]\",value:\"\"}),/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-check\"})),/*#__PURE__*/React.createElement(\"div\",{className:styles[\"business-info\"]},/*#__PURE__*/React.createElement(\"h2\",{className:\"subtitle\"},props.business.name),/*#__PURE__*/React.createElement(BusinessRating,{reviewCount:props.business.review_count,rating:props.business.rating}),/*#__PURE__*/React.createElement(\"p\",null,\" \",props.business.price,tags)),/*#__PURE__*/React.createElement(\"div\",{className:styles[\"contact-info\"]},/*#__PURE__*/React.createElement(\"p\",null,props.business.phone,\" \"),addressLines));}","map":{"version":3,"sources":["/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/src/Search/SearchResults/SearchResult/SearchResult.js"],"names":["React","useState","BusinessRating","styles","initialList","id","name","SearchResult","props","list","listData","setListData","setName","business","handleAdd","newList","concat","handleDelete","console","log","postData","restaurant","fetch","method","headers","body","JSON","stringify","response","ok","tags","categories","map","category","title","addressLines","location","display_address","addressLine","e","target","checked","image_url","review_count","rating","price","phone"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { BusinessRating } from \"../../../BusinessRating/BusinessRating\";\nimport styles from \"./SearchResult.module.css\";\n//import $ from \"jquery\";\n\nconst initialList = [\n  {\n    id: \"1\",\n    name: \"Nothing\",\n  },\n];\n\n//This is the part where a global function is declared.\n\n// function GlobalList (props) {\n//     const [listData, setListData] = useState({ list: initialList });\n//     const [name, setName] = useState(\"\");\n\n//     function handleAdd() {\n//       const newList = listData.list.concat({\n//         id: props.business.id,\n//         name: props.business.name,\n//       });\n//       setListData({ ...listData, list: newList });\n//       setName(\"\");\n//     }\n\n//     function handleDelete() {\n//       setListData({ list: initialList });\n//       setName(\"\");\n//     }\n\n//     console.log(name);\n//     console.log(listData);\n// }\n\nexport function SearchResult(props) {\n  // const [restaurant, setRestaurant] = useState([]);\n  const [listData, setListData] = useState({ list: initialList });\n  const [name, setName] = useState(\"\");\n  if (!props.business) {\n    return <div> Error! Not Found</div>;\n  }\n\n  // function handleClick(e) {\n  //   $(\".image-checkbox\").each(function () {\n  //     if ($(this).find('input[type=\"checkbox\"]').first().attr(\"checked\")) {\n  //       $(this).addClass(\"image-checkbox-checked\");\n  //     } else {\n  //       $(this).removeClass(\"image-checkbox-checked\");\n  //     }\n  //   });\n\n  //   // sync the state to the input\n  //   $(\".image-checkbox\").on(\"click\", function (e) {\n  //     $(this).toggleClass(\"image-checkbox-checked\");\n  //     var $checkbox = $(this).find('input[type=\"checkbox\"]');\n  //     $checkbox.prop(\"checked\", !$checkbox.prop(\"checked\"));\n\n  //     e.preventDefault();\n  //   });\n  //   console.log(\"Clicked\");\n  //}\n\n  function handleAdd() {\n    const newList = listData.list.concat({\n      id: props.business.id,\n      name: props.business.name,\n    });\n    setListData({ ...listData, list: newList });\n    setName(\"\");\n  }\n\n  function handleDelete() {\n    setListData({ list: initialList });\n    setName(\"\");\n  }\n\n  console.log(name);\n  console.log(listData);\n\n  const postData = async () => {\n    const restaurant = { listData: name };\n    const response = await fetch(\"/add_restaurant\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(restaurant),\n    });\n\n    if (response.ok) {\n      console.log(\"POST request works\");\n      console.log(response);\n    }\n  };\n\n  const tags = props.business.categories.map((category) => (\n    <span\n      className={`tag ${styles[\"business-tag\"]}`}\n      key={props.business.id + category.title}\n    >\n      {category.title}\n    </span>\n  ));\n  const addressLines = props.business.location.display_address.map(\n    (addressLine) => <p key={props.business.id + addressLine}>{addressLine}</p>\n  );\n\n  return (\n    <div className={styles[\"search-result\"]}>\n      <label\n        className={`image-checkbox`}\n        onClick={(e) => {\n          if (e.target.checked) {\n            handleAdd();\n            postData();\n          } else {\n            handleDelete();\n          }\n        }}\n        value={props.business.name}\n      >\n        <img\n          src={props.business.image_url}\n          alt=\"business\"\n          className={`${styles[\"business-image\"]}`}\n        />\n        <input type=\"checkbox\" name=\"image[]\" value=\"\" />\n        <i className={`fa fa-check`}></i>\n      </label>\n\n      <div className={styles[\"business-info\"]}>\n        <h2 className=\"subtitle\">{props.business.name}</h2>\n        <BusinessRating\n          reviewCount={props.business.review_count}\n          rating={props.business.rating}\n        />\n        <p>\n          {\" \"}\n          {props.business.price}\n          {tags}\n        </p>\n      </div>\n      <div className={styles[\"contact-info\"]}>\n        <p>{props.business.phone} </p>\n        {addressLines}\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}