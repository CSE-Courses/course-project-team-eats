{"ast":null,"code":"import _slicedToArray from\"/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{NavBar}from\"../NavBar/NavBar\";//import {SubNav} from '../NavBar/SubNav/SubNav';\nimport{SearchResultsSummary}from\"./SearchResultsSummary/SearchResultsSummary\";import{SearchResults}from\"./SearchResults/SearchResults\";import useReactRouter from\"use-react-router\";import{useBusinessSearch}from\"../hooks/yelp-api/useBusinessSearch\";import{Pagination}from\"./Pagination/Pagination\";export function Search(){var _useReactRouter=useReactRouter(),location=_useReactRouter.location,history=_useReactRouter.history;var params=new URLSearchParams(location.search);var term=params.get(\"find_desc\");var locationParam=params.get(\"find_loc\");var priceParam=params.get(\"price\");var radiusParam=params.get(\"radius\");var _useBusinessSearch=useBusinessSearch(term,locationParam,priceParam,radiusParam),_useBusinessSearch2=_slicedToArray(_useBusinessSearch,4),businesses=_useBusinessSearch2[0],amountResults=_useBusinessSearch2[1],searchParams=_useBusinessSearch2[2],performSearch=_useBusinessSearch2[3];if(!term||!locationParam){history.push(\"/\");}function search(term,location){var encodedTerm=encodeURI(term);var encodedLocation=encodeURI(location);history.push(\"/search?find_desc=\".concat(encodedTerm,\"&find_loc=\").concat(encodedLocation));performSearch({term:term,location:location});}function searchWithFilter(term,location,price){var encodedTerm=encodeURI(term);var encodedLocation=encodeURI(locationParam);var encodedPrice=price;history.push(\"/search?find_desc=\".concat(encodedTerm,\"&find_loc=\").concat(encodedLocation,\"&price=\").concat(encodedPrice));performSearch({term:term,location:location,price:price});}function searchWithRadiusFilter(term,location,radius){var encodedTerm=encodeURI(term);var encodedLocation=encodeURI(locationParam);var encodedRadius=radius;history.push(\"/search?find_desc=\".concat(encodedTerm,\"&find_loc=\").concat(encodedLocation,\"&radius=\").concat(encodedRadius));performSearch({term:term,location:location,radius:radius});}function getPagesCount(total,denominator){var divisible=total%denominator===0;var valueToBeAdded=divisible?0:1;return Math.floor(total/denominator)+valueToBeAdded;}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NavBar,{term:term,location:locationParam,search:search}),/*#__PURE__*/React.createElement(SearchResultsSummary,{term:searchParams.term,location:searchParams.location,amountResults:amountResults,shownResults:businesses?businesses.length:0,searchWithFilter:searchWithFilter,searchWithRadiusFilter:searchWithRadiusFilter,search:search}),/*#__PURE__*/React.createElement(SearchResults,{businesses:businesses}),/*#__PURE__*/React.createElement(Pagination,{getPagesCount:getPagesCount}));}","map":{"version":3,"sources":["/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/src/Search/Search.js"],"names":["React","NavBar","SearchResultsSummary","SearchResults","useReactRouter","useBusinessSearch","Pagination","Search","location","history","params","URLSearchParams","search","term","get","locationParam","priceParam","radiusParam","businesses","amountResults","searchParams","performSearch","push","encodedTerm","encodeURI","encodedLocation","searchWithFilter","price","encodedPrice","searchWithRadiusFilter","radius","encodedRadius","getPagesCount","total","denominator","divisible","valueToBeAdded","Math","floor","length"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { NavBar } from \"../NavBar/NavBar\";\n//import {SubNav} from '../NavBar/SubNav/SubNav';\nimport { SearchResultsSummary } from \"./SearchResultsSummary/SearchResultsSummary\";\nimport { SearchResults } from \"./SearchResults/SearchResults\";\nimport useReactRouter from \"use-react-router\";\nimport { useBusinessSearch } from \"../hooks/yelp-api/useBusinessSearch\";\nimport { Pagination } from \"./Pagination/Pagination\";\n\nexport function Search() {\n  const { location, history } = useReactRouter();\n  const params = new URLSearchParams(location.search);\n  const term = params.get(\"find_desc\");\n  const locationParam = params.get(\"find_loc\");\n  const priceParam = params.get(\"price\");\n  const radiusParam = params.get(\"radius\");\n  const [\n    businesses,\n    amountResults,\n    searchParams,\n    performSearch,\n  ] = useBusinessSearch(term, locationParam, priceParam, radiusParam);\n\n  if (!term || !locationParam) {\n    history.push(\"/\");\n  }\n\n  function search(term, location) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(location);\n    history.push(\n      `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}`\n    );\n    performSearch({ term, location });\n  }\n\n  function searchWithFilter(term, location, price) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(locationParam);\n    const encodedPrice = price;\n\n    history.push(\n      `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}&price=${encodedPrice}`\n    );\n    performSearch({ term, location, price });\n  }\n\n  function searchWithRadiusFilter(term, location, radius) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(locationParam);\n    const encodedRadius = radius;\n\n    history.push(\n      `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}&radius=${encodedRadius}`\n    );\n    performSearch({ term, location, radius });\n  }\n\n  function getPagesCount(total, denominator) {\n    const divisible = total % denominator === 0;\n    const valueToBeAdded = divisible ? 0 : 1;\n    return Math.floor(total / denominator) + valueToBeAdded;\n  }\n\n  return (\n    <div>\n      <NavBar term={term} location={locationParam} search={search} />\n      {/* <SubNav /> */}\n      <SearchResultsSummary\n        term={searchParams.term}\n        location={searchParams.location}\n        amountResults={amountResults}\n        shownResults={businesses ? businesses.length : 0}\n        searchWithFilter={searchWithFilter}\n        searchWithRadiusFilter={searchWithRadiusFilter}\n        search={search}\n      />\n      <SearchResults businesses={businesses} />\n      <Pagination getPagesCount={getPagesCount} />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}