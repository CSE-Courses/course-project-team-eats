{"ast":null,"code":"var _jsxFileName = \"/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/src/Search/Search.js\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { NavBar } from \"../NavBar/NavBar\";\nimport styles from \"./Search.module.css\";\nimport { SearchResultsSummary } from \"./SearchResultsSummary/SearchResultsSummary\";\nimport { SearchResults } from \"./SearchResults/SearchResults\";\nimport useReactRouter from \"use-react-router\";\nimport { useBusinessSearch } from \"../hooks/yelp-api/useBusinessSearch\";\nimport { Pagination } from \"./Pagination/Pagination\";\nexport function Search() {\n  const {\n    location,\n    history\n  } = useReactRouter();\n  const params = new URLSearchParams(location.search);\n  const term = params.get(\"find_desc\");\n  const locationParam = params.get(\"find_loc\");\n  const priceParam = params.get(\"price\");\n  const radiusParam = params.get(\"radius\");\n  const offsetParam = params.get(\"offset\");\n  const [businesses, amountResults, searchParams, performSearch] = useBusinessSearch(term, locationParam, priceParam, radiusParam, offsetParam);\n\n  if (!term || !locationParam) {\n    history.push(\"/\");\n  }\n\n  function search(term, location) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(location);\n    history.push(`/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}`);\n    performSearch({\n      term,\n      location\n    });\n  }\n\n  function searchWithFilter(term, location, price) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(locationParam);\n    const encodedPrice = price;\n    history.push(`/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}&price=${encodedPrice}`);\n    performSearch({\n      term,\n      location,\n      price\n    });\n  }\n\n  function searchWithRadiusFilter(term, location, radius) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(locationParam);\n    const encodedRadius = radius;\n    history.push(`/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}&radius=${encodedRadius}`);\n    performSearch({\n      term,\n      location,\n      radius\n    });\n  }\n\n  function nextPage(term, location, offset) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(locationParam);\n    const encodedOffset = offset;\n    history.push(`/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}&offset=${encodedOffset}`);\n    performSearch({\n      term,\n      location,\n      offset\n    });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault(); //TODO: function to submit data to the DB\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(NavBar, {\n    term: term,\n    location: locationParam,\n    search: search,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(SearchResultsSummary, {\n    term: searchParams.term,\n    location: searchParams.location,\n    amountResults: amountResults,\n    shownResults: businesses ? businesses.length : 0,\n    searchWithFilter: searchWithFilter,\n    searchWithRadiusFilter: searchWithRadiusFilter,\n    search: search,\n    handleSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: `${styles[\"flexbox\"]}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"heading\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, \"Choose your 5 best restaurants\"), /*#__PURE__*/React.createElement(Link, {\n    to: history,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: `button is-info ${styles[\"submit-button\"]}`,\n    onClick: e => handleSubmit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, \"Next User\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-chevron-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 15\n    }\n  }))))), /*#__PURE__*/React.createElement(SearchResults, {\n    businesses: businesses,\n    handleSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Pagination, {\n    nextPage: nextPage,\n    search: search,\n    term: searchParams.term,\n    location: searchParams.location,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/rakshitdwivedi/Desktop/React/course-project-team-eats/src/Search/Search.js"],"names":["React","Link","NavBar","styles","SearchResultsSummary","SearchResults","useReactRouter","useBusinessSearch","Pagination","Search","location","history","params","URLSearchParams","search","term","get","locationParam","priceParam","radiusParam","offsetParam","businesses","amountResults","searchParams","performSearch","push","encodedTerm","encodeURI","encodedLocation","searchWithFilter","price","encodedPrice","searchWithRadiusFilter","radius","encodedRadius","nextPage","offset","encodedOffset","handleSubmit","e","preventDefault","length"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { NavBar } from \"../NavBar/NavBar\";\nimport styles from \"./Search.module.css\";\nimport { SearchResultsSummary } from \"./SearchResultsSummary/SearchResultsSummary\";\nimport { SearchResults } from \"./SearchResults/SearchResults\";\nimport useReactRouter from \"use-react-router\";\nimport { useBusinessSearch } from \"../hooks/yelp-api/useBusinessSearch\";\nimport { Pagination } from \"./Pagination/Pagination\";\n\nexport function Search() {\n  const { location, history } = useReactRouter();\n  const params = new URLSearchParams(location.search);\n  const term = params.get(\"find_desc\");\n  const locationParam = params.get(\"find_loc\");\n  const priceParam = params.get(\"price\");\n  const radiusParam = params.get(\"radius\");\n  const offsetParam = params.get(\"offset\");\n  const [\n    businesses,\n    amountResults,\n    searchParams,\n    performSearch,\n  ] = useBusinessSearch(\n    term,\n    locationParam,\n    priceParam,\n    radiusParam,\n    offsetParam\n  );\n\n  if (!term || !locationParam) {\n    history.push(\"/\");\n  }\n\n  function search(term, location) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(location);\n    history.push(\n      `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}`\n    );\n    performSearch({ term, location });\n  }\n\n  function searchWithFilter(term, location, price) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(locationParam);\n    const encodedPrice = price;\n\n    history.push(\n      `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}&price=${encodedPrice}`\n    );\n    performSearch({ term, location, price });\n  }\n\n  function searchWithRadiusFilter(term, location, radius) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(locationParam);\n    const encodedRadius = radius;\n\n    history.push(\n      `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}&radius=${encodedRadius}`\n    );\n    performSearch({ term, location, radius });\n  }\n\n  function nextPage(term, location, offset) {\n    const encodedTerm = encodeURI(term);\n    const encodedLocation = encodeURI(locationParam);\n    const encodedOffset = offset;\n\n    history.push(\n      `/search?find_desc=${encodedTerm}&find_loc=${encodedLocation}&offset=${encodedOffset}`\n    );\n    performSearch({ term, location, offset });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    //TODO: function to submit data to the DB\n  }\n\n  return (\n    <div>\n      <NavBar term={term} location={locationParam} search={search} />\n      {/* <SubNav /> */}\n      <SearchResultsSummary\n        term={searchParams.term}\n        location={searchParams.location}\n        amountResults={amountResults}\n        shownResults={businesses ? businesses.length : 0}\n        searchWithFilter={searchWithFilter}\n        searchWithRadiusFilter={searchWithRadiusFilter}\n        search={search}\n        handleSubmit={handleSubmit}\n      />\n\n      <div className={`${styles[\"flexbox\"]}`}>\n        <div className={styles[\"heading\"]}>Choose your 5 best restaurants</div>\n        <Link to={history}>\n          <button\n            className={`button is-info ${styles[\"submit-button\"]}`}\n            onClick={(e) => handleSubmit(e)}\n          >\n            <span>Next User</span>\n            <span className=\"icon\">\n              <i className=\"fas fa-chevron-right\"></i>\n            </span>\n          </button>\n        </Link>\n      </div>\n      <SearchResults businesses={businesses} handleSubmit={handleSubmit} />\n      <Pagination\n        nextPage={nextPage}\n        search={search}\n        term={searchParams.term}\n        location={searchParams.location}\n      />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}